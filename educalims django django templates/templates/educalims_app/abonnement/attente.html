{% extends "base.html" %}

{% block breadcrumb %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/"><i class="bi bi-house-door"></i> Accueil</a></li>
        <li class="breadcrumb-item"><a href="{% url 'educalims_app:abonnement_choix_cycle' %}">Abonnements</a></li>
        {% if cycle %}
        <li class="breadcrumb-item"><a href="{% url 'educalims_app:abonnement_choix_discipline' cycle.pk %}">{{ cycle.nom }}</a></li>
        {% endif %}
        {% if discipline %}
        <li class="breadcrumb-item"><a href="{% url 'educalims_app:abonnement_choix_niveau' discipline.pk %}">{{ discipline.nom }}</a></li>
        {% endif %}
        {% if niveau %}
        <li class="breadcrumb-item"><a href="{% url 'educalims_app:abonnement_choix_formule' niveau.pk %}">{{ niveau.nom }}</a></li>
        {% endif %}
        <li class="breadcrumb-item"><a href="{% url 'educalims_app:mes_abonnements' %}">Traitement</a></li>
    </ol>
</nav>
{% endblock %}

{% block title %}Traitement en cours - EDUCALIMS{% endblock %}

{% block content %}
<style>
.spinner-grow {
    width: 3rem;
    height: 3rem;
}
</style>

<div class="row justify-content-center align-items-center" style="min-height: 60vh;">
    <div class="col-md-6 text-center">
        <div class="spinner-grow text-primary mb-4" role="status">
            <span class="visually-hidden">Chargement...</span>
        </div>
        <h3>Traitement de votre paiement en cours...</h3>
        <p class="text-muted">Veuillez patienter, ne fermez pas cette page.</p>
        <p class="small text-muted">Référence : {{ transaction.reference }}</p>

        <div id="timeout-message" class="alert alert-warning mt-4" style="display: none;">
            <i class="bi bi-exclamation-triangle"></i>
            Le traitement prend plus de temps que prévu. Vous pouvez vérifier l'état de votre paiement dans "Mes abonnements".
        </div>

        <div class="mt-4">
            <a href="{% url 'educalims_app:mes_abonnements' %}" class="btn btn-outline-secondary">
                Voir mes abonnements
            </a>
        </div>
    </div>
</div>

<script>
// Afficher un message après 30 secondes
setTimeout(function() {
    document.getElementById('timeout-message').style.display = 'block';
}, 30000);
</script>
{% endblock %}
