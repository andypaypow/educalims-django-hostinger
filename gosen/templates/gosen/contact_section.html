<section class="contact-wrapper-section">
    <div class="contact-container-max">
        <div class="contact-title-section">
            <h2 class="contact-main-title">Contactez-nous</h2>
            <p class="contact-subtitle">Une question ? Un probleme ? Nhesitez pas a nous envoyer un message !</p>
        </div>
        <div class="contact-grid-layout">
            <div class="contact-info-panel">
            </div>
            <form class="contact-form-inline" id="contactFormInline">
                {% csrf_token %}
                <input type="text" name="nom" class="contact-input-field" placeholder="Votre nom *" required>

                <div class="whatsapp-input-group">
                    <select name="indicatif" class="contact-indicatif-select">
                        <option value="+241">+241 (Gabon)</option>
                        <option value="+1">+1 (USA/Canada)</option>
                        <option value="+33">+33 (France)</option>
                        <option value="+41">+41 (Suisse)</option>
                        <option value="+32">+32 (Belgique)</option>
                        <option value="+237">+237 (Cameroun)</option>
                        <option value="+225">+225 (Cote d'Ivoire)</option>
                        <option value="+221">+221 (Senegal)</option>
                        <option value="+34">+34 (Espagne)</option>
                        <option value="+39">+39 (Italie)</option>
                        <option value="+49">+49 (Allemagne)</option>
                        <option value="+44">+44 (UK)</option>
                    </select>
                    <input type="tel" name="whatsapp" class="contact-input-field" placeholder="Numero WhatsApp *" required>
                </div>

                <select name="type_demande" class="contact-input-field" required>
                    <option value="">Type de demande...</option>
                    <option value="don">Don</option>
                    <option value="partenariat">Partenariat</option>
                    <option value="acces_gratuit">Acces gratuit</option>
                    <option value="support">Support technique</option>
                    <option value="autre">Autre</option>
                </select>
                <textarea name="message" class="contact-input-field contact-textarea-field" placeholder="Votre message..." rows="3" required></textarea>
                <button type="submit" class="contact-button-submit">Envoyer &rarr;</button>
            </form>
        </div>
        <div class="contact-success-alert" id="contactSuccessBox" style="display: none;">
            <span>&checkmark;</span><p>Message envoye avec succes !</p>
        </div>
    </div>
</section>
<style>
.contact-wrapper-section{background:var(--bg-secondary);margin-top:50px;padding:40px 20px;border-top:1px solid var(--border-color)}
.contact-container-max{max-width:1100px;margin:0 auto}
.contact-title-section{text-align:center;margin-bottom:30px}
.contact-main-title{color:var(--gabon-green);font-size:2rem;margin-bottom:10px;text-shadow:0 0 10px rgba(0,158,96,0.3)}
.contact-subtitle{color:var(--text-secondary);font-size:1rem}
.contact-grid-layout{display:grid;grid-template-columns:1fr 1.2fr;gap:30px}
.contact-link-card{display:block;padding:18px;background:var(--bg-card);border:1px solid var(--border-color);border-radius:10px;text-decoration:none;color:var(--text-primary);margin-bottom:12px;transition:all 0.3s ease}
.contact-link-card:hover{background:var(--gabon-yellow);border-color:var(--gabon-green);transform:translateX(5px);color:#000}
.contact-form-inline{display:flex;flex-direction:column;gap:12px}
.contact-input-field{padding:14px 16px;border:1px solid var(--border-color);border-radius:8px;background:var(--bg-input);color:var(--text-primary);font-family:Poppins,sans-serif;font-size:0.95rem;width:100%;box-sizing:border-box}
.contact-input-field:focus{outline:none;border-color:var(--gabon-green);box-shadow:0 0 0 3px rgba(0,158,96,0.15);background:var(--bg-card)}
.contact-indicatif-select{padding:14px 10px;border:1px solid var(--border-color);border-radius:8px;background:var(--bg-input);color:var(--text-primary);font-family:Poppins,sans-serif;font-size:0.95rem;cursor:pointer;min-width:140px}
.whatsapp-input-group{display:flex;gap:8px}
.contact-textarea-field{resize:vertical;min-height:100px}
.contact-button-submit{background:var(--gradient-green);color:#fff;border:none;border-radius:8px;padding:14px 24px;font-family:Poppins,sans-serif;font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;text-transform:uppercase}
.contact-button-submit:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,158,96,0.4);background:var(--gradient-blue)}
.contact-success-alert{grid-column:1/-1;text-align:center;padding:25px;background:rgba(0,158,96,0.1);border:1px solid var(--gabon-green);border-radius:10px}
.contact-success-alert span{color:var(--gabon-green);font-size:2rem;margin-right:10px}
.contact-success-alert p{color:var(--gabon-green);font-size:1.1rem;font-weight:600;margin:0}
@media (max-width:768px){
    .contact-grid-layout{grid-template-columns:1fr;gap:25px}
    .contact-main-title{font-size:1.6rem}
    .whatsapp-input-group{flex-direction:column}
}
</style>
<script>
const form=document.getElementById('contactFormInline'),successBox=document.getElementById('contactSuccessBox');
if(form){
    form.addEventListener('submit',async function(e){
        e.preventDefault();
        const btn=form.querySelector('.contact-button-submit'),originalText=btn.textContent;
        btn.disabled=true;
        btn.textContent='Envoi...';
        const formData=new FormData(form),data=Object.fromEntries(formData.entries());
        try{
            const response=await fetch('/api/contact/submit/',{
                method:'POST',
                headers:{'Content-Type':'application/json','X-CSRFToken':formData.get('csrfmiddlewaretoken')},
                body:JSON.stringify(data)
            }),result=await response.json();
            if(result.success){
                form.style.display='none';
                successBox.style.display='block';
                setTimeout(()=>{
                    form.reset();
                    form.style.display='flex';
                    successBox.style.display='none';
                },5000);
            }else{
                alert(result.error||'Erreur.');
            }
        }catch(error){
            alert('Erreur de connexion.');
        }finally{
            btn.disabled=false;
            btn.textContent=originalText;
        }
    });
}
</script>
